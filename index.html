<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haunted Map - Paranormal Locations</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a0a0a 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c1810, #4a2c17);
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 20px rgba(255, 107, 53, 0.3);
        }

        .header h1 {
            font-size: 2.5em;
            color: #ff6b35;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            margin-bottom: 10px;
        }

        .header p {
            color: #cccccc;
            font-size: 1.1em;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .map-controls {
            background: rgba(42, 42, 42, 0.9);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .control-group label {
            color: #ff6b35;
            font-size: 0.9em;
            font-weight: bold;
        }

        select, input {
            padding: 8px;
            border: 1px solid #555;
            border-radius: 5px;
            background: #333;
            color: white;
            font-size: 14px;
        }

        .generate-btn {
            background: linear-gradient(135deg, #ff6b35, #e55a2e);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s ease;
            margin-left: auto;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }

        .map-container {
            background: rgba(42, 42, 42, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        #map {
            width: 100%;
            height: 500px;
            border-radius: 10px;
            border: 2px solid #444;
            position: relative;
            z-index: 1;
        }

        /* Dark theme for the map */
        .leaflet-tile {
            filter: brightness(0.3) contrast(1.5) saturate(0.8) hue-rotate(180deg);
        }

        /* Custom marker styles */
        .haunted-marker {
            background: radial-gradient(circle, #ff6b35, #cc4a1a);
            border: 2px solid #fff;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            box-shadow: 0 2px 10px rgba(255, 107, 53, 0.7);
            animation: pulse 2s infinite;
            cursor: pointer;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 107, 53, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 107, 53, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 107, 53, 0); }
        }

        /* Custom popup styles */
        .leaflet-popup-content-wrapper {
            background: rgba(0, 0, 0, 0.95) !important;
            border: 2px solid #ff6b35 !important;
            border-radius: 10px !important;
            color: #fff !important;
        }

        .leaflet-popup-content {
            color: #fff !important;
            margin: 15px !important;
        }

        .leaflet-popup-content h3 {
            color: #ff6b35 !important;
            margin-bottom: 8px !important;
            font-size: 1.1em !important;
        }

        .leaflet-popup-content p {
            color: #ccc !important;
            font-size: 0.9em !important;
            line-height: 1.4 !important;
        }

        .leaflet-popup-tip {
            background: rgba(0, 0, 0, 0.95) !important;
            border: 2px solid #ff6b35 !important;
        }

        .leaflet-popup-close-button {
            color: #ff6b35 !important;
            font-size: 18px !important;
            font-weight: bold !important;
        }

        .locations-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .location-card {
            background: linear-gradient(145deg, #2a2a2a, #1f1f1f);
            border: 1px solid #444;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .location-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b35, #ff8c42, #ff6b35);
        }

        .location-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.2);
            border-color: #ff6b35;
        }

        .location-title {
            color: #ff6b35;
            font-size: 1.3em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .location-type {
            display: inline-block;
            background: rgba(255, 107, 53, 0.2);
            color: #ff6b35;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-bottom: 15px;
            border: 1px solid #ff6b35;
        }

        .location-story {
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .location-features {
            border-top: 1px solid #333;
            padding-top: 15px;
        }

        .location-features h4 {
            color: #ff6b35;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .features-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .feature-tag {
            background: rgba(255, 107, 53, 0.1);
            color: #ff6b35;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            border: 1px solid rgba(255, 107, 53, 0.3);
        }

        .loading {
            text-align: center;
            color: #ff6b35;
            font-size: 1.2em;
            padding: 40px;
        }

        .instructions {
            background: rgba(42, 42, 42, 0.8);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #ff6b35;
        }

        .instructions h3 {
            color: #ff6b35;
            margin-bottom: 10px;
        }

        .instructions p {
            color: #ccc;
            line-height: 1.5;
        }

        .coordinates {
            color: #aaa;
            font-size: 0.8em;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .map-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .generate-btn {
                margin-left: 0;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .locations-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üëª Interactive Haunted Map</h1>
        <p>Explore haunted places and attractions worldwide with stories</p>
    </div>

    <div class="container">
        <div class="instructions">
            <h3>üó∫Ô∏è How to Use the Haunted Map</h3>
            <p>Select your preferences below and click "Generate Locations" to populate the haunted sites. Click on any ghost marker to view the location's paranormal story and reported activities.</p>
        </div>

        <div class="map-controls">
            <div class="control-group">
                <label>Region:</label>
                <select id="region">
                    <option value="northeast">Northeast US</option>
                    <option value="southeast">Southeast US</option>
                    <option value="midwest">Midwest US</option>
                    <option value="southwest">Southwest US</option>
                    <option value="west">Western US</option>
                    <option value="uk">United Kingdom</option>
                    <option value="europe">Europe</option>
                </select>
            </div>

            <div class="control-group">
                <label>Location Type:</label>
                <select id="locationType">
                    <option value="mixed">All Types</option>
                    <option value="asylum">Abandoned Asylums</option>
                    <option value="battlefield">Battlefields</option>         
                    <option value="cemetery">Cemeteries</option>
                    <option value="attractions">Haunted Attractions</option>
                    <option value="hotel">Haunted Hotels</option>                    
                    <option value="mansion">Historic Mansions</option>
                    <option value="prison">Prisons & Jails</option>
                    <option value="school">Schools & Universities</option>
                    <option value="theater">Theaters & Opera Houses</option>
                </select>
            </div>

            <div class="control-group">
                <label>Activity Level:</label>
                <select id="activityLevel">
                    <option value="mixed">All Levels</option>
                    <option value="mild">Mild Activity</option>
                    <option value="moderate">Moderate Activity</option>
                    <option value="intense">Intense Activity</option>
                </select>
            </div>

            <div class="control-group">
                <label>Number of Locations:</label>
                <select id="locationCount">
                    <option value="5">5 Locations</option>
                    <option value="10">10 Locations</option>
                    <option value="15">15 Locations</option>
                    <option value="20">20 Locations</option>
                </select>
            </div>

            <button class="generate-btn" onclick="generateHauntedLocations()">
                üé≤ Generate Locations
            </button>
        </div>

        <div class="map-container">
            <div id="map"></div>
        </div>

        <div id="locationsList" class="locations-list">
            <!-- Generated locations will appear here -->
        </div>
    </div>

    <!-- Leaflet JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    
    <script>
        // Initialize the map
        let map = L.map('map').setView([39.8283, -98.5795], 5); // Center of USA

        // Add dark-themed tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);

        // Store markers for clearing
        let markersGroup = L.layerGroup().addTo(map);

        // Regional coordinates
        const regionCoords = {
            northeast: { center: [42.0, -73.0], zoom: 6 },
            southeast: { center: [33.0, -82.0], zoom: 6 },
            midwest: { center: [41.0, -93.0], zoom: 5 },
            southwest: { center: [34.0, -108.0], zoom: 5 },
            west: { center: [40.0, -120.0], zoom: 5 },
            uk: { center: [54.5, -3.0], zoom: 6 },
            europe: { center: [50.0, 10.0], zoom: 4 }
        };

        // Sample AI-generated haunted locations database with real coordinates
        const hauntedLocationsDB = {
            cemetery: [
                {
                    name: "Whispering Oaks Cemetery",
                    story: "Established in 1847, this Victorian-era cemetery is known for the mysterious woman in white who walks among the graves at midnight. Visitors report cold spots near the old mausoleums and the sound of children laughing near the family plots.",
                    features: ["Cold Spots", "Apparitions", "EVP Activity", "Mysterious Lights"],
                    activityLevel: "moderate"
                },
                {
                    name: "Shadowmere Memorial Gardens",
                    story: "This sprawling cemetery dating back to 1823 is home to the ghost of a Civil War soldier who still patrols the grounds. The sound of marching boots echoes through the paths, and visitors often see a figure in uniform standing by the war memorial.",
                    features: ["Phantom Footsteps", "Military Apparitions", "Temperature Drops", "Electromagnetic Disturbances"],
                    activityLevel: "intense"
                },
                {
                    name: "Restwood Cemetery",
                    story: "A small family cemetery from the 1800s where unexplained orbs of light dance between the headstones. Locals report hearing funeral bells ring at 3 AM, though no church bells exist for miles around.",
                    features: ["Orb Activity", "Phantom Bells", "Electromagnetic Anomalies", "Time Distortions"],
                    activityLevel: "mild"
                }
            ],
            mansion: [
                {
                    name: "Blackwood Manor",
                    story: "Built in 1889 by railroad baron Edmund Blackwood, this Gothic Revival mansion is said to be cursed by the tragic deaths of three generations of the family. Visitors report doors opening on their own, piano music from empty rooms, and the scent of roses in winter.",
                    features: ["Moving Objects", "Phantom Music", "Unexplained Scents", "Shadow Figures"],
                    activityLevel: "intense"
                },
                {
                    name: "Ravencroft Estate",
                    story: "Once home to a prominent 19th-century judge, this Victorian mansion harbors dark secrets. The ghost of Judge Ravencroft is said to still hear cases in his study, and witnesses report the sound of a gavel striking wood in the dead of night.",
                    features: ["Phantom Sounds", "Cold Drafts", "Electrical Disturbances", "Spectral Figures"],
                    activityLevel: "moderate"
                },
                {
                    name: "Thornfield House",
                    story: "This antebellum mansion was abandoned after a mysterious fire in 1923. Visitors report seeing lights in the windows and hearing party music from the ballroom, as if the final celebration never ended.",
                    features: ["Phantom Lights", "Residual Hauntings", "Period Music", "Apparitions in Period Dress"],
                    activityLevel: "moderate"
                }
            ],
            asylum: [
                {
                    name: "Millfield Psychiatric Hospital",
                    story: "Abandoned in 1987, this former mental health facility is notorious for its dark history and ongoing paranormal activity. Visitors report hearing patients' voices echoing through empty corridors and seeing figures in hospital gowns wandering the halls.",
                    features: ["Disembodied Voices", "Apparitions", "Medical Equipment Moving", "Overwhelming Sadness"],
                    activityLevel: "intense"
                },
                {
                    name: "Crescent Hills Sanitarium",
                    story: "Built in 1904 to treat tuberculosis patients, this abandoned sanitarium is known for its ghostly residents who never left. The sound of wheelchairs rolling down empty halls and coughing fits echo through the building.",
                    features: ["Phantom Wheelchairs", "Residual Sounds", "Cold Spots", "Electrical Disturbances"],
                    activityLevel: "intense"
                }
            ],
            hotel: [
                {
                    name: "The Grandview Hotel",
                    story: "This 1920s luxury hotel has never closed its doors, but some guests never checked out. Room 237 is permanently unavailable due to reports of a woman in 1920s attire who appears in mirrors and rearranges guests' belongings.",
                    features: ["Mirror Apparitions", "Moving Objects", "Vintage Perfume Scent", "Elevator Malfunctions"],
                    activityLevel: "moderate"
                },
                {
                    name: "The Winchester Inn",
                    story: "A historic coaching inn dating back to 1765, where travelers report sharing their rooms with previous guests from centuries past. The ghost of a stagecoach driver still announces arrivals at midnight.",
                    features: ["Phantom Announcements", "Period Apparitions", "Cold Drafts", "Historical Reenactment"],
                    activityLevel: "mild"
                }
            ],
            battlefield: [
                {
                    name: "Bloody Creek Battlefield",
                    story: "Site of a brutal Civil War skirmish in 1863, where over 200 soldiers lost their lives in a single day. Visitors report hearing musket fire and battle cries, and seeing uniformed figures marching across the field at dawn.",
                    features: ["Battle Sounds", "Military Apparitions", "Residual Energy", "Historical Imprints"],
                    activityLevel: "intense"
                }
            ],
            school: [
                {
                    name: "Riverside Elementary",
                    story: "Closed in 1995 after declining enrollment, this old school building echoes with the laughter and voices of children who once learned here. Teachers report seeing students in their classrooms and hearing the school bell ring.",
                    features: ["Children's Voices", "Phantom School Bells", "Classroom Activity", "Playful Spirits"],
                    activityLevel: "mild"
                }
            ],
            theater: [
                {
                    name: "The Majestic Opera House",
                    story: "Built in 1898, this grand theater is home to 'The Lady in Red,' a former actress who died on opening night. She still takes her bow during performances, and actors report receiving flowers from empty seats.",
                    features: ["Phantom Actress", "Mysterious Flowers", "Curtain Movement", "Spotlight Activity"],
                    activityLevel: "moderate"
                }
            ],
            prison: [
                {
                    name: "Irongate Penitentiary",
                    story: "Operational from 1876 to 1963, this former prison housed some of the most notorious criminals of its era. Guard tours report cell doors slamming shut, keys rattling, and the sound of chains dragging across floors.",
                    features: ["Slamming Doors", "Phantom Keys", "Chain Sounds", "Oppressive Atmosphere"],
                    activityLevel: "intense"
                }
            ]
        };

        let currentLocations = [];

        function generateHauntedLocations() {
            const region = document.getElementById('region').value;
            const locationType = document.getElementById('locationType').value;
            const activityLevel = document.getElementById('activityLevel').value;
            const locationCount = parseInt(document.getElementById('locationCount').value);

            // Clear existing markers
            markersGroup.clearLayers();

            // Move map to selected region
            const regionData = regionCoords[region];
            map.setView(regionData.center, regionData.zoom);

            // Show loading
            document.getElementById('locationsList').innerHTML = '<div class="loading">üîÆ AI is generating haunted locations...</div>';
            
            setTimeout(() => {
                currentLocations = [];
                
                // Generate locations based on selections
                const types = locationType === 'mixed' ? Object.keys(hauntedLocationsDB) : [locationType];
                
                for (let i = 0; i < locationCount; i++) {
                    const randomType = types[Math.floor(Math.random() * types.length)];
                    const typeLocations = hauntedLocationsDB[randomType] || hauntedLocationsDB.cemetery;
                    const baseLocation = typeLocations[Math.floor(Math.random() * typeLocations.length)];
                    
                    // Generate coordinates within the selected region
                    const coords = generateRegionalCoordinates(region);
                    
                    // Create variation of the base location
                    const location = {
                        id: i,
                        name: generateVariationName(baseLocation.name, i),
                        type: randomType,
                        story: generateVariationStory(baseLocation.story, i),
                        features: shuffleArray([...baseLocation.features]).slice(0, 3 + Math.floor(Math.random() * 2)),
                        activityLevel: activityLevel === 'mixed' ? 
                            ['mild', 'moderate', 'intense'][Math.floor(Math.random() * 3)] : 
                            activityLevel,
                        lat: coords.lat,
                        lng: coords.lng
                    };
                    
                    currentLocations.push(location);
                }
                
                displayLocationsOnMap();
                displayLocationsList();
            }, 2000); // Simulate AI generation time
        }

        function generateRegionalCoordinates(region) {
            const bounds = {
                northeast: { latMin: 40.0, latMax: 47.0, lngMin: -80.0, lngMax: -67.0 },
                southeast: { latMin: 25.0, latMax: 39.0, lngMin: -90.0, lngMax: -75.0 },
                midwest: { latMin: 35.0, latMax: 49.0, lngMin: -104.0, lngMax: -82.0 },
                southwest: { latMin: 25.0, latMax: 42.0, lngMin: -125.0, lngMax: -94.0 },
                west: { latMin: 32.0, latMax: 49.0, lngMin: -125.0, lngMax: -102.0 },
                uk: { latMin: 50.0, latMax: 59.0, lngMin: -8.0, lngMax: 2.0 },
                europe: { latMin: 35.0, latMax: 70.0, lngMin: -10.0, lngMax: 40.0 }
            };

            const bound = bounds[region];
            return {
                lat: Math.random() * (bound.latMax - bound.latMin) + bound.latMin,
                lng: Math.random() * (bound.lngMax - bound.lngMin) + bound.lngMin
            };
        }

        function generateVariationName(baseName, index) {
            const prefixes = ['Old', 'Forgotten', 'Ancient', 'Cursed', 'Lost', 'Hidden', 'Abandoned', 'Mysterious'];
            const suffixes = ['Heights', 'Hollow', 'Ridge', 'Grove', 'Point', 'Valley', 'Cross', 'Hill'];
            
            if (Math.random() < 0.3) {
                const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                return baseName.replace(/^[\w\s]+/, prefix + ' ' + baseName.split(' ').slice(-1)[0]);
            }
            
            return baseName;
        }

        function generateVariationStory(baseStory, index) {
            const variations = [
                baseStory,
                baseStory.replace(/visitors report/gi, 'witnesses have experienced'),
                baseStory.replace(/said to be/gi, 'believed to be'),
                baseStory.replace(/ghost of/gi, 'spirit of'),
                baseStory.replace(/mysterious/gi, 'unexplained')
            ];
            
            return variations[index % variations.length];
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function displayLocationsOnMap() {
            currentLocations.forEach(location => {
                // Create custom icon
                const hauntedIcon = L.divIcon({
                    className: 'haunted-marker',
                    html: 'üëª',
                    iconSize: [30, 30],
                    iconAnchor: [15, 15]
                });

                // Create marker
                const marker = L.marker([location.lat, location.lng], {
                    icon: hauntedIcon
                }).addTo(markersGroup);

                // Create popup content
                const popupContent = `
                    <h3>${location.name}</h3>
                    <p><strong>Type:</strong> ${location.type.charAt(0).toUpperCase() + location.type.slice(1)}</p>
                    <p><strong>Activity:</strong> ${location.activityLevel.charAt(0).toUpperCase() + location.activityLevel.slice(1)}</p>
                    <p><strong>Coordinates:</strong> ${location.lat.toFixed(4)}, ${location.lng.toFixed(4)}</p>
                    <p>${location.story.substring(0, 150)}...</p>
                `;

                marker.bindPopup(popupContent, {
                    maxWidth: 300,
                    className: 'haunted-popup'
                });
            });
        }

        function displayLocationsList() {
            const listContainer = document.getElementById('locationsList');
            
            listContainer.innerHTML = currentLocations.map(location => `
                <div class="location-card">
                    <div class="location-title">${location.name}</div>
                    <div class="coordinates">üìç ${location.lat.toFixed(4)}, ${location.lng.toFixed(4)}</div>
                    <div class="location-type">${location.type.charAt(0).toUpperCase() + location.type.slice(1)} - ${location.activityLevel.charAt(0).toUpperCase() + location.activityLevel.slice(1)} Activity</div>
                    <div class="location-story">${location.story}</div>
                    <div class="location-features">
                        <h4>Reported Paranormal Activity:</h4>
                        <div class="features-list">
                            ${location.features.map(feature => `<span class="feature-tag">${feature}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Generate initial locations on page load
        window.addEventListener('load', () => {
            setTimeout(generateHauntedLocations, 1000);
        });
    </script>
</body>
</html>
